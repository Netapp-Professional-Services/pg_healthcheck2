= Feature Roadmap: On-Demand AI Reporting
:doctype: article
:toc: left
:toclevels: 3
:sectnums:
:icons: font

This document tracks the progress and remaining tasks for the on-demand AI report generation feature.

---

### âœ… Phase 1: Core Backend Setup (Complete)
- **Database Schema:** All necessary tables (`ai_providers`, `user_ai_profiles`, `analysis_rules`, `prompt_templates`, `generated_ai_reports`) have been designed and created.
- **Data Migration:** Scripts to populate the `analysis_rules` and `prompt_templates` tables from the main project's file system have been created and run successfully.

---

### âœ… Phase 2: AI Configuration Management (Complete)
- **Admin UI (AI Providers):** Administrators can now create, view, and delete system-wide AI provider configurations through the admin dashboard.
- **User UI (AI Profiles):** A dedicated "AI Settings" page has been created where users can perform full CRUD (Create, Read, Update, Delete) operations on their personal, encrypted AI profiles.

---

### âœ… Phase 3: Core Report Generation Logic (Complete)
- **Decoupled AI Connector:** The `trends_app/ai_connector.py` module is complete. It securely fetches credentials from the database and communicates with the AI API.
- **Decoupled Prompt Generator:** The `trends_app/prompt_generator.py` module is complete. It analyzes run data against database-driven rules and renders database-driven Jinja2 templates to create audience-specific prompts.
- **Main API Endpoint:** The `/api/generate-ai-report` endpoint in `main.py` is complete. It orchestrates the entire workflow from receiving a user request to generating, encrypting, storing, and returning the final report.

---

### âœ… Phase 4: Frontend Integration (Complete)
- **Dashboard UI:** The main dashboard now includes the necessary dropdowns and buttons for generating an AI report.
- **API Integration:** The dashboard's JavaScript successfully calls the backend APIs to populate the dropdowns and trigger the report generation process.

---

### âœ… Phase 5: Report History & Retrieval (Complete)
- **Backend API:** The API endpoints for listing, downloading, and updating metadata for generated reports are complete in `main.py`.
- **Frontend UI:** The "Report History" page is fully functional, allowing users to view their generated reports, edit metadata, and re-download them.
- **Navigation:** A link to the "Report History" page has been added to the main dashboard header for easy access.

---

### ðŸ“‹ Phase 6: Future Enhancements (Backlog)
- **[ To Do ]** Implement full Role-Based Access Control (RBAC) for user management, using the existing `grp` and `grppriv` tables. This would involve creating a new admin interface for managing roles and their privilege assignments.
- **[ To Do ]** Refine the AI provider configuration to separate models into their own table, allowing a many-to-one relationship (one provider can have many models).
- **[ To Do ]** Enhance the "Report History" page with search and filtering capabilities.
- **[ To Do ]** Add more advanced error handling and user feedback throughout the UI (e.g., more specific "toast" notifications instead of generic `alert()` popups).
