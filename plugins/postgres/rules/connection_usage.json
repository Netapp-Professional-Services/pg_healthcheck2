{
  "connection_usage": {
    "metric_keywords": [
      "connection"
    ],
    "data_conditions": [
      {
        "key": "total_connections",
        "exists": true
      },
      {
        "key": "max_connections",
        "exists": true
      }
    ],
    "rules": [
      {
        "expression": "not settings.get('using_connection_pooler', False) and (int(data['total_connections']) / int(data['max_connections'])) * 100 > 90",
        "level": "critical",
        "score": 5,
        "reasoning": "Connection usage at {(int(data['total_connections']) / int(data['max_connections'])) * 100:.1f}% of maximum",
        "recommendations": [
          "Immediate action required: Connection pool near capacity"
        ]
      },
      {
        "expression": "not settings.get('using_connection_pooler', False) and (int(data['total_connections']) / int(data['max_connections'])) * 100 > 75",
        "level": "high",
        "score": 4,
        "reasoning": "Connection usage at {(int(data['total_connections']) / int(data['max_connections'])) * 100:.1f}% of maximum",
        "recommendations": [
          "Monitor connection usage and consider connection pooling"
        ]
      }
    ]
  }
}